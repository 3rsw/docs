<!DOCTYPE html>
<!-- Page last generated 2018-03-23 16:15:15 +1100 -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>seL4SharedDataWithCaps | seL4 docs</title>

    <!-- Our stylesheet and theme stylesheet.  Contains bootstrap. -->
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <!-- Font awesome -->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <!-- Pygments syntax highlighting  -->
    <link rel="stylesheet" href="/assets/css/highlighting/trac.css" type="text/css">

  </head>

  <body class="container">

    

<header>
  <ul class="row menu">
    <li class="col-xs-12 col-md-2" >
            <a href="/">
              <img class="img-responsive" src="/logos/logo-text-white.svg" alt="seL4 logo" />
            </a>
    </li>
    <li class="col-xs-12 col-md-10 menu">
      <nav aria-label="Banner links">
        <h2><a href="/Documentation">Documentation</a></h2>
        <h2><a href="/Getting_started">Getting Started</a></h2>
        <h2><a href="/Tutorials">Tutorials</a></h2>
        <h2><a href="https://research.csiro.au/tsblog">Blog</a></h2>
      </nav>
    </li>
  </ul>
  <div class="clear"></div>
  <div class="breadcrumbs bootstrap hidden-sm-down">
  <nav class="sel-breadcrumb" aria-label="Breadcrumb" >
    <ol class=" list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
      
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/">
              <span property="name"><b>seL4 Docs</b></span>
              <meta property="position" content="1" />
            </a>
        </li>
      
        

        
          <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <span property="name">seL4SharedDataWithCaps</span>
            <meta property="position" content="2" /></li>
          
    </ol>
  </nav>
  <nav class="sel-version" aria-label="Current Versions">
    <ol class="list-unstyled">
      <li class="list-unstyled text-right" style="margin-left:auto; padding:0rem 0rem;">
        Current versions:</li>
      <li class="list-unstyled text-right">
      <a href="/sel4_release/seL4_8.0.0/"><b>seL4-8.0.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/sel4_release/seL4_5.2.0-mcs/"><b>seL4-5.2.0-mcs</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/camkes_release/CAmkES_3.2.0/"><b>camkes-3.2.0</b></a></li>
    </ol>
  </nav>
  <div class='clear'></div>
</div>


</header>

    <main>
      

<div class="content">
  <h1 id="sel4shareddatawithcaps">seL4SharedDataWithCaps</h1>

<p><code class="highlighter-rouge">seL4SharedDataWithCaps</code> is a CAmkES connector for connecting dataport
interfaces, where one side of the interface has caps to the frames
backing the dataport. This is different from the common dataport
connector <code class="highlighter-rouge">seL4SharedData</code>, in which neither side has caps to the frames.
<code class="highlighter-rouge">seL4SharedData</code> is used in the CAmkES VM to implement Cross VM Dataports,
which require the VMM to map memory backing a dataport into the VMâ€™s
address space - an operation which requires caps to the frames.</p>

<p>The templates and connector definition for <code class="highlighter-rouge">seL4SharedDataWithCaps</code> is in
<a href="https://github.com/SEL4PROJ/global-components">global-components</a>.</p>

<p>For an example of this connector in action, see the
<a href="https://github.com/seL4/camkes-vm/blob/master/apps/vm/optiplex9020.camkes#L46">CAmkES VM</a>.</p>

<h3 id="usage">Usage</h3>

<p>Connect a pair of dataport interfaces, as with <code class="highlighter-rouge">seL4SharedData</code>. The <code class="highlighter-rouge">to</code>
component instance on the side of the connection will have caps to the
dataport frames in its cspace. The connector implements the following
interface, which provides access to the caps mapping the dataport:
<a href="https://github.com/seL4/camkes-vm/blob/3883770209ba2bfb4f85ed2b7d387731e2601b7d/common/include/dataport_caps.h">dataport_caps.h</a>.</p>

<p>The interface on the <code class="highlighter-rouge">to</code> side of each <code class="highlighter-rouge">seL4SharedDataWithCaps</code> connection
must be configured with a unique id and size:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;instance&gt;.&lt;interface&gt;_id = &lt;unique integer &gt;= 1&gt;;
&lt;instance&gt;.&lt;interface&gt;_size = &lt;integer size&gt;;
</code></pre></div></div>

<p>Specifying a non-unique or non-positive id is an error. Specifying a
size other than the size of the type of the dataport is an error.
Omitting this configuration for an interface connected with
<code class="highlighter-rouge">seL4SharedDataWithCaps</code> is an error.</p>

</div>

    </main>
    

<footer class="site-footer">

  <h2 class="footer-heading">seL4 docs</h2>

  <div class="footer-col-wrapper">

    <div class="col-md-2">
      

<ul class="social-media-list">
  <li><a href="https://github.com/sel4"><i class="fab fa-github"></i> <span class="username">sel4</span></a></li><li><a href="https://github.com/sel4proj"><i class="fab fa-github"></i> <span class="username">sel4proj</span></a></li>
</ul>

    </div>

    <div class="col-md-8">
      <ul class="list-unstyled">
        <li>
          This site is for displaying seL4 related documentation.  Pull requests are welcome.
        </li>
        
      </ul>
    </div>
    <div class="col-md-2">
      <a href="/sitemap">Sitemap</a>
    </div>

  </div>

</footer>
  </body>
</html>
